<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: octopress | The {pnk}f(eli)x Blog]]></title>
  <link href="http://blog.pnkfx.org/blog/categories/octopress/atom.xml" rel="self"/>
  <link href="http://blog.pnkfx.org/"/>
  <updated>2022-05-12T02:01:07-04:00</updated>
  <id>http://blog.pnkfx.org/</id>
  <author>
    <name><![CDATA[Felix S. Klock II]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Fixing Octopress Table Rendering]]></title>
    <link href="http://blog.pnkfx.org/blog/2015/12/18/fixing-octopress-table-rendering/"/>
    <updated>2015-12-18T22:00:00-05:00</updated>
    <id>http://blog.pnkfx.org/blog/2015/12/18/fixing-octopress-table-rendering</id>
    <content type="html"><![CDATA[<p>Learn how I hacked the SCSS for my blog to get tables to look right,
without breaking everything else (I hope).</p>

<!-- more -->


<p>Here is a sample table.</p>

<table>
<thead>
<tr>
<th>key </th>
<th> value1 </th>
<th> value2</th>
</tr>
</thead>
<tbody>
<tr>
<td>a   </td>
<td> apple  </td>
<td> aardvark</td>
</tr>
<tr>
<td>b   </td>
<td> banana </td>
<td> bonobo</td>
</tr>
<tr>
<td>c   </td>
<td> clementine </td>
<td> cat</td>
</tr>
</tbody>
</table>


<p>It is written in my blog source via this source text:</p>

<pre><code>key | value1 | value2
----|--------|----------
a   | apple  | aardvark
b   | banana | bonobo
c   | clementine | cat
</code></pre>

<p>The default octopress presentation of such a table just smushes the
text into a grid, but does not render the division of the header,
rows, columns, nor cells in any way (no borders, no colors, et
cetera).</p>

<p>After hearing a colleague complain about how bad that default
presentation looked compared to what Github does with such tables, I
decided to try to figure out how to fix it.</p>

<p>First, I opened up gist.github.com and put my table into a gist there
(with a <code>.md</code>) extension, so I could see what github does to render
such tables.</p>

<p>By hitting &ldquo;Inpsect Element&rdquo; and looking at the
cascading style sheet (CSS) settings for the <code>table</code>, <code>tr</code>, <code>th</code>, and
<code>td</code> elements,<label for='&lsquo;settings&rsquo;' class='margin-toggle'> &#8853;</label><input type='checkbox' id='&lsquo;settings&rsquo;' class='margin-toggle'/><span class='marginnote'>&lsquo;Namely, </span>
I identified the things that needed to change.</p>

<p><label for='' class='margin-toggle'>&#8853;</label><input type='checkbox' id='' class='margin-toggle'/><span class='marginnote'>
The one trick I <em>will</em> note, since its a pretty cute hack on the
part of CSS, is the way it uses the <code>:nth-child</code> selector to
differentiate the even rows from the odd rows when deciding on the
background color.
</span>
You can see the specific changes, with comments, in the <code>.scss</code>
file transcribed below; I will not describe the effect of each one
here.</p>

<p>My usual tactic when doing this sort of interactive exploration of CSS
is to toggle each such setting on and off in the reference document
(the rendered gist, in this case), to see the effect of the setting on
the overall document, and then manually enter the setting into a
similarly inspected element in the target document where I am trying
to recreate the effect.</p>

<p>To limit the effect of the styling to just the tables that appear in a
blog post, I made sure that each CSS customization was prefixed by
<code>.entry-content</code>; I had determined via inspection that each block
entry is surrounded by a <code>&lt;div class="entry-content"&gt;</code>.</p>

<p>So, I added the customizations to my <code>sass/custom/_styles.scss</code>,
regenerated my site, and looked at the result. It was quite promising,
except for one big problem: I had changed the formatting for <em>all</em>
tables, including the ones that are used to render code snippets!</p>

<p><label for='' class='margin-toggle'>&#8853;</label><input type='checkbox' id='' class='margin-toggle'/><span class='marginnote'>
I will admit that I do not actually know the semantics of an
&ldquo;inherit&rdquo; setting. I assume it means something like &ldquo;inherit the
value from your parent element, based on the context of where you
appear in the document.&rdquo;
</span>
So I further revised the CSS so that, when you are in the context of a
<code>class="code"</code> underneath a <code>class="entry-content"</code>, <em>then</em> you should
just inherit the setting, rather than using the values specified here.</p>

<p>Anyway, <em>that</em> seemed to work great!</p>

<p>So here&rsquo;s my customized <code>_better_tables.scss</code> file (which is
imported into the aformentioned <code>_styles.scss</code> file via
<code>@import "better_tables";</code>)</p>

<pre><code class="scss">// make the text for the header row bold and centered.
// (I have not been able to figure out where jekyll/octopress are overriding
//  the text-align and setting it to `left`)
.entry-content th { font-weight: bold; text-align: center }

// typography for p/blockquote/ul/ol puts a 1.5em margin below those elements,
// so do the same for our tables ...
.entry-content table { margin-bottom: 1.5em }

// ... but undo that for tables for pygments-generated code
.entry-content .code table { margin-bottom: inherit }


// add a border around each cell and padding around its content ...
.entry-content th, .entry-content td {
  border: 1px solid #ddd;
  padding: 6px 13px;
}

// ... but undo that for tables for pygments-generated code
.entry-content .code th, .entry-content .code td {
  border: inherit; padding: inherit;
}


// zebra-stripe the rows (N.B. `nth-child(2n)` works too) ...
.entry-content tr                 { background-color: #FFFFFF }
.entry-content tr:nth-child(even) { background-color: #F8F8F8 }

// ... but undo that for tables for pygments-generated code
.entry-content .code tr                 { background-color: inherit }
.entry-content .code tr:nth-child(even) { background-color: inherit }
</code></pre>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Cherry-picking from the shoulders of giants]]></title>
    <link href="http://blog.pnkfx.org/blog/2015/11/27/cherrypicking-tuftes-of-hair/"/>
    <updated>2015-11-27T14:00:00-05:00</updated>
    <id>http://blog.pnkfx.org/blog/2015/11/27/cherrypicking-tuftes-of-hair</id>
    <content type="html"><![CDATA[<p>This post: I describe some changes to my blog&rsquo;s presentation
format, and how I hacked them in by cherry-picking from the shoulders
of giants.</p>

<!-- more -->


<p>I&rsquo;m a big fan of Edward Tufte&rsquo;s work on presentation of
information. He mostly focuses on graphical presentations, especially
of statistical data. But really one can learn much from his overall
presentation style, e.g. from how he formats his text.</p>

<p>Of course I am not the first person to recognize this. :)</p>

<p>Lots of people have been adapting Tufte&rsquo;s style to formats compatible
with standard electronic authoring environments.</p>

<ul>
<li><p><a href="https://tufte-latex.github.io/tufte-latex/">tufte-latex</a> is pretty cool, if you&rsquo;re working in the realm of
LaTeX. (For example, <a href="http://www.mpi-sws.org/~turon/turon-thesis.pdf">aturon&rsquo;s thesis</a>
uses this style.)</p></li>
<li><p><a href="https://edwardtufte.github.io/tufte-css/">tufte-css</a> is pretty cool, if you&rsquo;re working in the realm of
writing HTML and want to just plug in a style sheet and go.</p></li>
</ul>


<p>(I&rsquo;m sure the hardcore Tufte fans in the audience are now saying &ldquo;How
can you claim to want to emulate Tufte&rsquo;s work in a post that uses a
bulleted list!?!&rdquo; I think there remains a time and place for a
bulleted list; this digression continues <a href="#on-bulleted-lists">below</a>.)</p>

<ul>
<li><p>What if you&rsquo;re trying to work with a blog system like
Octopress?</p>

<p>Well, you&rsquo;re actually in luck; other people have already done the
work of adapting the style rules in <a href="https://edwardtufte.github.io/tufte-css/">tufte-css</a> to Jekyll (the
infrastructure that Octopress is built upon), yielding
<a href="http://clayh53.github.io/tufte-jekyll/articles/15/tufte-style-jekyll-blog">tufte-jekyll</a>.</p></li>
</ul>


<p>After skimming over the presentation over at <a href="http://clayh53.github.io/tufte-jekyll/articles/15/tufte-style-jekyll-blog">tufte-jekyll</a> and
suffering with recurrent Octopress issues, I briefly considered
<span style="white-space: nowrap"><code>rm -rf</code>&lsquo;ing</span> Octopress from my blog system and adopting Jekyll directly.
(Which isn&rsquo;t as big a deal as it sounds, since Octopress is built on
top of Jekyll and so in principle I would get to reuse much of my
previous customizations.)</p>

<p>But the reality is that I do not really want to spend that much time on this;
having a presentation that matches every aspect of <a href="http://clayh53.github.io/tufte-jekyll/articles/15/tufte-style-jekyll-blog">tufte-jekyll</a> is not
currently that important to me. (At least, not yet.)</p>

<p>What I really wanted was to cherry-pick certain aspects that I find
important.</p>

<p>In particular, I <em>really</em> want sidenotes (and margin notes/figures),
and an option for full width figures. I&rsquo;ll discuss each in turn.</p>

<p>Luckily for me, the presentation of <a href="http://clayh53.github.io/tufte-jekyll/articles/15/tufte-style-jekyll-blog">tufte-jekyll</a> is itself
somewhat dedicated to spelling out how each feature was added.  In
other words, it seems <em>perfect</em> to use as the basis for such
cherry-picking.</p>

<p>Pretty much all of the things I wanted were implemented in
<a href="http://clayh53.github.io/tufte-jekyll/articles/15/tufte-style-jekyll-blog">tufte-jekyll</a> via Jekyll Plugins. Let&rsquo;s go through them one by one,
largely just to prove to myself that it is all working as I expect,</p>

<p>(In actual practice, what this actually meant is that iteratively
fixed my CSS and/or made my own variants of the plugins until this
text rendered as a postable demonstration).</p>

<p>(The presentation below makes claims about how each construct is
written in the source markdown; however, each case is assuming that
one has installed the appropriate Jekyll plugins and SCSS support
files)</p>

<a name="Side.Notes"></a>
<h2>Side Notes</h2>

<p>My previous blog posts<label for='&lsquo;previous-blog-posts&rsquo;' class='margin-toggle sidenote-number'></label><input type='checkbox' id='&lsquo;previous-blog-posts&rsquo;' class='margin-toggle'/><span class='sidenote'>&lsquo;Hey, </span>
sometimes hacked in ad-hoc footnotes. But footnotes on the web are
super awkward because I am never quite sure how far down into the post
to collect the footnotes together.  Furthermore, I dislike how my
ad-hoc footnotes would disrupt the flow of the text if they were not
placed at the bottom of the (potentially very long) post; but if they
were all collected at the bottom, then navigating the page becomes
unwieldy at best.</p>

<p>Side notes do not suffer from either of these problems.</p>

<p>Side note support (and margin content in general) <em>does</em> come at the
cost of potentially introducing a large unused space on the right-hand
side of the presentation.</p>

<p>But the CSS magic here is smart enough to only try to grab the space
if it can afford to do so; if you are viewing this on a narrow
device,<label for='&lsquo;thin-browser&rsquo;' class='margin-toggle sidenote-number'></label><input type='checkbox' id='&lsquo;thin-browser&rsquo;' class='margin-toggle'/><span class='sidenote'>&lsquo;Or </span>
the superscript indicating the presence of an associated side note
turns into a toggle switch for the associated content (now presented <em>inline</em>
with the text when toggled on).</p>

<p>One writes a sidenote with the following liquid tag syntax:

<code>
main content{% sidenote 'unique-id' 'side content' %}
</code>

which renders as:
main content<label for='&lsquo;unique-id&rsquo;' class='margin-toggle sidenote-number'></label><input type='checkbox' id='&lsquo;unique-id&rsquo;' class='margin-toggle'/><span class='sidenote'>&lsquo;side </span></p>

<a name="Margin.Notes"></a>
<h2>Margin Notes</h2>

<p>Sometimes even the superscripted number that a sidenote carries is
disruptive, and unnecessary if:</p>

<ol>
<li><p>the content is lined up nicely, and</p></li>
<li><p>the presentation width for the main column is sufficiently wide.</p></li>
</ol>


<p>In other words: Why not drop the superscript?
<label for='&lsquo;inherited-from-foonotes&rsquo;' class='margin-toggle'> &#8853;</label><input type='checkbox' id='&lsquo;inherited-from-foonotes&rsquo;' class='margin-toggle'/><span class='marginnote'>&lsquo;This </span></p>

<p>That&rsquo;s what marginnotes are for.</p>

<p>But again, one wants to handle the case where the rendering area is
too narrow to set aside a margin. If your make the window narrow, you
will see that a margin note is replaced with an
inline symbol<label for='&lsquo;checkplus&rsquo;' class='margin-toggle sidenote-number'></label><input type='checkbox' id='&lsquo;checkplus&rsquo;' class='margin-toggle'/><span class='sidenote'>&lsquo;Since </span>
that will provide the reader with a way to toggle the presentation
of the elided content on and off, the same way that the superscript
acted as a toggle for a sidenote above.</p>

<p>Anyway, the code for <code>marginnote</code> is entirely analogous to that for <code>sidenote</code>.
One writes a margin note with the following liquid tag syntax:

<code>
main content{% marginnote 'uniq-id' 'margin content' %}
</code>

which renders as:
main content<label for='&lsquo;uniq-id&rsquo;' class='margin-toggle'> &#8853;</label><input type='checkbox' id='&lsquo;uniq-id&rsquo;' class='margin-toggle'/><span class='marginnote'>&lsquo;margin </span></p>

<a name="Margin.Figures"></a>
<h2>Margin Figures</h2>

<p>Another topic I have touched on (and plan to do more with soon) is
drawing diagrams of graph structures. This usually involves SVG in
some manner.
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
     id="demo_svg_defs" height="0" viewBox="0 0 32 32">
<defs>
<pattern id="grid_cell" width=10 height=10 patternUnits="userSpaceOnUse">
<path d="M 0,0 v10 h10" fill="none" stroke="#aaa" stroke-width=1/>
</pattern>
<pattern id="grid" width=100 height=100 patternUnits="userSpaceOnUse">
<path d="M 0,0 v100 h100 v-100 z" stroke="#555" stroke-width=1 fill="url(#grid_cell)"/>
</pattern>
<g id="the_pic">
<rect x=0 y=0 width="100%" height="100%" fill="url(#grid)"/>
<circle cx=20 cy=20 r=10 stroke="green" fill="none"/>
<path d="M 80,30 C 90,20 30,20 10,40" stroke="blue" fill="none"/>
</g>
</defs>
</svg></p>

<p>Here is a relatively simple bit of SVG:</p>

<p><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
     id="demo_svg_main" height="50" width="100%">
<use xlink:href="#the_pic"/>
</svg></p>

<!-- If you're looking at this source code, then you can see that the
     actual content definitions are above, in the SVG group (`g`)
     element identified by `the_pic` -->


<p>I want to be able to present such diagrams in the same manner that
<code>tufte-css</code> and <code>tufte-jekyll</code> presents margin figures, full-width
figures, and column width figures.</p>

<p>However, <code>tufte-jekyll</code> assumes in its plugin for these features that
whatever figure you want to present is held in a separate file.</p>

<p><label for='&lsquo;svg-margin-figure&rsquo;' class='margin-toggle'>&#8853;</label><input type='checkbox' id='&lsquo;svg-margin-figure&rsquo;' class='margin-toggle'/><span class='marginnote'>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
     id="demo_svg_margin" height="50" width="100%">
<use xlink:href="#the_pic"/>
</svg>
Here is a margin figure; it shows a circle and a cubic bezier curve
(along with helpful grid lines, which I need to figure out how to
adjust the coordinates in the source SVG).
</span></p>

<p>I resolved this by hacking the <code>margin_figure.rb</code> plugin so that it
extends from <code>Liquid::Block</code> instead of <code>Liquid::Tag</code>, and then
hacking the implementation of the plugin until it started producing
the output I expect. By the time I finished, I had something
with a totally different feature-set and interface; so I renamed
this version of the plugin to <code>marginblock</code>.</p>

<p><label for='' class='margin-toggle'>&#8853;</label><input type='checkbox' id='' class='margin-toggle'/><span class='marginnote'>
Actually, I think all of the side- and margin-content extensions
discussed here have the same limitation that they only work with
inline elements.
</span></p>

<p>Important Caveat: this hacked <code>marginblock</code> plugin can only handle
inline elements.</p>

<p><label for='&lsquo;demo-code-in-margin&rsquo;' class='margin-toggle'>&#8853;</label><input type='checkbox' id='&lsquo;demo-code-in-margin&rsquo;' class='margin-toggle'/><span class='marginnote'>
<code>&lt;code&gt;styling&lt;/code&gt;</code> does work (via HTML or Markdown backticks), but
fenced code blocks do not, because they generate <code>figure</code> and <code>table</code>
elements.
</span></p>

<ol>
<li><p>HTML code for certain elements (like
 <nobr><code>figure</code>,</nobr> <nobr><code>p</code>,</nobr> <nobr><code>pre</code>,</nobr> or
 <code>table</code> elements) will fragment the content, with some initial
 portion in the margin, and the remainder injected into the main
 text.</p></li>
<li><p>Markdown syntax that generates block-level elements has the
 same problem as HTML block-level elements.</p>

<p> For example, content after an empty line will be converted into
 a <code>p</code> element (and those will end up injected back into the main
 text).</p></li>
</ol>


<p>In other words: any markdown syntax inside a <code>marginblock</code>, including just an empty line
separating two blocks of text, will just confuse things.</p>

<p>So, don&rsquo;t do that.</p>

<p>To write a margin block, use the following syntax:

<code>
{% marginblock %}
Margin block content, with no line breaks (see caveat above).
{% endmarginblock %}
</code>
</p>

<a name="Full.Width.Figures"></a>
<h2>Full Width Figures</h2>

<p>You might have noticed that in the SVG diagram <a
href="#demo_svg_main">above</a>, the diagram only spans the width of
the &ldquo;main text&rdquo;, while the code block spans the full extent of the
page, flowing into the margin area.</p>

<p>I have hacked the CSS so that all of the figures for code are given
the full width of the page (otherwise, they always overflowed the
available space, yielding unfortunate scroll bars).</p>

<p>Still, it might well be that some SVG diagrams will likewise need the
full width of the page.
<code>tufte-jekyll</code> provides a plugin for this (called <code>fullwidth</code>), but
much like with its <code>marginfigure</code> plugin,
the <code>fullwidth</code> plugin assumes that
the content to be rendered lives in a separate file. Analogously to
how I dealt with that by making my own version of plugin,
<code>margin_block</code>, I have here made my own <code>fullwidth_figure</code> plugin.</p>

<p>Here is that circle and bezier curve again, this time spanning
the full width of the page:</p>

<p><figure class='fullwidth'>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
     id="demo_svg_main" height="50" width="100%">
<use xlink:href="#the_pic"/>
</svg>
</figure></p>

<p>So, all you need to do is write:

<code>
{% fullwidthfigure %}
The lines of fullwidth figure content will extend across the full
width of the page before line wrapping. (Some block elements will end
up being mishandled, so don't use elements like `p` or `ul`, et
cetera, or Markdown that generates them.)
As the name implies, this is nested within a `figure` element;
that means, for example, you can use `figcaption` to add a caption:
&lt;figcaption&gt;Caption for `fullwidthfigure` demo&lt;/figcaption&gt;
{% endfullwidthfigure %}
</code>

which renders as:
<figure class='fullwidth'>
The lines of fullwidth figure content will extend across the full
width of the page before line wrapping. (Some block elements will end
up being mishandled, so don&rsquo;t use elements like <code>p</code> or <code>ul</code>, et
cetera, or Markdown that generates them.)
As the name implies, this is nested within a <code>figure</code> element;
that means, for example, you can use <code>figcaption</code> to add a caption:
<figcaption>Caption for <code>fullwidthfigure</code> demo</figcaption>
</figure></p>

<a name="Drawbacks..Rendering.Bugs.and.or.Gotcha.s"></a>
<h2>Drawbacks, Rendering Bugs and/or Gotcha&rsquo;s</h2>

<p>Originally I had a whole section here decrying the fact that I could
not put <em>any</em> line breaks into the source for a <code>sidenote</code> or
<code>marginnote</code>, since the Liquid tag parser requires the entirety of a
tag be contained on one line.</p>

<p>But then I hacked up <code>marginblock</code> (described above), and my problem
just goes away
<label for='' class='margin-toggle'>&#8853;</label><input type='checkbox' id='' class='margin-toggle'/><span class='marginnote'>
Well, it goes away for superscript-free margin notes, at least.
If I ever feel the need to write a long side note, then I guess
I&rsquo;ll make a <code>sideblock</code> plugin at that time.
</span></p>

<p>Besides, maybe discouraging me from writing
long side notes<label for='&lsquo;dfw&rsquo;' class='margin-toggle sidenote-number'></label><input type='checkbox' id='&lsquo;dfw&rsquo;' class='margin-toggle'/><span class='sidenote'>&lsquo;I </span>
is not such a bad thing.</p>

<ul>
<li><p>Oh, by the way, it looks like you cannot throw side notes just
<em>anywhere</em><label for='&lsquo;bullet-test&rsquo;' class='margin-toggle sidenote-number'></label><input type='checkbox' id='&lsquo;bullet-test&rsquo;' class='margin-toggle'/><span class='sidenote'>&lsquo;Like, </span>
and expect them to play nice with the other marked up text.</p>

<p>For example, it may appear at a inconsistently inset margin&hellip; or worse&hellip;</p></li>
<li><p>Markup in a surrounding context is handled <em>somewhat<label for='&lsquo;emph-test&rsquo;' class='margin-toggle sidenote-number'></label><input type='checkbox' id='&lsquo;emph-test&rsquo;' class='margin-toggle'/><span class='sidenote'>&lsquo;This </span> poorly</em>,
in that it may inherit the style of the surrounding markup it was embedded within</p></li>
<li><p>And some contexts, like code markup,<label for='&lsquo;code-test&rsquo;' class='margin-toggle'> &#8853;</label><input type='checkbox' id='&lsquo;code-test&rsquo;' class='margin-toggle'/><span class='marginnote'>&lsquo;Yeah, </span>
are handled <em>especially poorly</em>.
<code>
As in `not<label for='code-test' class='margin-toggle sidenote-number'></label><input type='checkbox' id='code-test' class='margin-toggle'/><span class='sidenote'>This is not fine </span> good.
</code></p></li>
</ul>


<a name="L.a.id..on-bulleted-lists....a.On.Bulleted.Lists"></a>
<h2><a id="on-bulleted-lists"></a>On Bulleted Lists</h2>

<p>Speaking of bulleted lists: I implied up above that Tufte has a
problem with the use of bulleted lists, and that this is why the
standard <a href="https://edwardtufte.github.io/tufte-css/">tufte-css</a> does away with
them.<label for='&lsquo;is-ul-really-gone&rsquo;' class='margin-toggle sidenote-number'></label><input type='checkbox' id='&lsquo;is-ul-really-gone&rsquo;' class='margin-toggle'/><span class='sidenote'>&lsquo;Or </span></p>

<p>If you are curious about Tufte&rsquo;s argument against the use of bulleted
lists, I highly recommend you pick up his essay
<a href="http://www.edwardtufte.com/tufte/books_pp">&ldquo;The Cognitive Style of PowerPoint&rdquo;</a>,<label for='' class='margin-toggle'>&#8853;</label><input type='checkbox' id='' class='margin-toggle'/><span class='marginnote'>
Your local library is more likely to carry &ldquo;Beautiful Evidence&rdquo;
than the PowerPoint essay on its own (which one might deem a pamphlet).
Alternatively, you can also
<a href="http://www.edwardtufte.com/tufte/ebooks">purchase</a>
the Powerpoint essay as a PDF-format e-book on Tufte&rsquo;s website.
</span>
(which you can acquire on its own, or can be found as a chapter of his book
<a href="http://www.edwardtufte.com/tufte/books_be">&ldquo;Beautiful Evidence&rdquo;</a>).</p>

<p>For me, when writing markdown, the visible bullets serve a purpose.</p>

<p><label for='' class='margin-toggle'>&#8853;</label><input type='checkbox' id='' class='margin-toggle'/><span class='marginnote'>
According to some conventions, my argument here is a strawman,
because I have already failed by putting more than six words on a
single bullet (&ldquo;any more words per bullet, and you don&rsquo;t have a
bullet.&rdquo;). I do not really have an argument against that,
(except that Tufte himself seems to lambast such rules of thumb).
</span></p>

<ul>
<li><p>In particular, I sometimes attach more than one paragraph of text
to an item in an unordered list.</p></li>
<li><p>But if I associate more than one paragraph of text with an item on
such a list, then without the visible bullet, one cannot readily
tell whether the new paragraph has started a new item, &hellip;</p>

<p>&hellip; or if it is a continuation of the previous item.</p></li>
<li><p>Then again, since the standard Octopress format does not indent
unordered lists, the same problem arises unless one
customizes<label for='&lsquo;scss-indented-list&rsquo;' class='margin-toggle sidenote-number'></label><input type='checkbox' id='&lsquo;scss-indented-list&rsquo;' class='margin-toggle'/><span class='sidenote'>&lsquo;See </span>
its SCSS to turn it on. (I tried this, but it ends up being more
trouble than its worth in terms of it breaking other things in the
CSS implementing this main-and-margin presentation.)</p></li>
<li><p>Have you noticed that the indentation of the margin notes
that are attached to list-elements are a little screwy?</p>

<ul>
<li><p>This is because of how the CSS is implemented; the main content elements
(like <code>p</code>, <code>ul</code>, et cetera) are all assigned <code>width: 60%</code>,
so that the remaining 40% is available for the margin content,
which is then assigned <code>margin-right: -40%</code> in the CSS.</p></li>
<li><p>The problem, as far as I can tell, is that the <code>-40%</code> is computed
relative to the width of the parent element.<label for='&lsquo;relative-margins-and-list-indents&rsquo;' class='margin-toggle sidenote-number'></label><input type='checkbox' id='&lsquo;relative-margins-and-list-indents&rsquo;' class='margin-toggle'/><span class='sidenote'>&lsquo;When </span></p></li>
<li><p>(Update: For that matter, the <em>width</em> of the text in nested list elements,
 like this one, does not play well with the margin content; the text
 of the list element in the main column is creeping into the margin.)</p></li>
<li><p>I have spent some time trying to puzzle this out, but at this point
I am willing to just say &ldquo;avoid attaching margin content to list
elements.&rdquo;</p></li>
</ul>
</li>
</ul>


<p>I <em>am</em> trying to learn how to make my blog posts more stream of thought
(for quick generation and publication), rather than carefully crafted
pieces of art. The bulleted list approach certainly provides a
quick-and-dirty way to do that.<label for='&lsquo;long-text&rsquo;' class='margin-toggle sidenote-number'></label><input type='checkbox' id='&lsquo;long-text&rsquo;' class='margin-toggle'/><span class='sidenote'>&lsquo;Speaking </span></p>

<p>Update: a draft verison of this blog post had an <code>hr</code>-element between the
previous paragraph and this point in the text. Then shortly before publication,
I changed the <code>hr</code>-element to a new section heading, and didn&rsquo;t notice that
the fix I had put into the CSS to make the span of <code>hr</code>-element shorter
did not apply to the dotted line being rendered above the section header.</p>

<hr />

<p>So, now (post publication) I have put back in an <code>hr</code>-element at roughly the point
I expect it in the text.</p>

<a name="How.d.He.Do.Dat."></a>
<h2>How&rsquo;d He Do Dat?</h2>

<p>So how did I do all this?</p>

<p>I started by copying the <a href="http://clayh53.github.io/tufte-jekyll/articles/15/tufte-style-jekyll-blog">tufte-jekyll</a> plugins and SCSS support
files into my blog source tree. Since I use Octopress, I had to move
things around a bit:</p>

<ol>
<li><p>The <code>tufte.scss</code> that you find in tufte-jekyll&rsquo;s <code>css/</code>
needs to go somewhere; I put a copy of it into <code>sass/custom</code>.</p>

<p>Then I made a copy of the copy and named it <code>_fsk_tufte.scss</code><label for='&lsquo;on-renaming&rsquo;' class='margin-toggle'> &#8853;</label><input type='checkbox' id='&lsquo;on-renaming&rsquo;' class='margin-toggle'/><span class='marginnote'>&lsquo;In </span></p></li>
<li><p>After putting the <code>.scss</code> files into place, I had to actually load the
main one into the Jekyll&rsquo;s page generation system. That is accomplished
via an <code>@import</code> in <code>sass/custom/_styles.scss</code>:</p>

<pre><code>@import "fsk_tufte";
</code></pre></li>
<li><p>Running the <code>rake generate</code> task to generate the CSS and the pages showed that
there were references to undefined variables like <code>$constrast-color</code>.
I skimmed through <code>fsk_tufte.scss</code> and either removed such references
or figured out where those variables were defined in the original
tufte-jekyll source repository, and ported them over accordingly.
For example, <code>$contrast-color</code> was defined in <code>_sass/_settings.scss</code>;
I cut-and-pasted it into <code>sass/custom/_color.scss</code>.</p></li>
<li><p>I initially copied all of the plugins from tufte-jekyll&rsquo;s
<code>_plugins/</code> into my <code>plugins/</code>.</p></li>
<li><p>Even after doing this, a lot of things were broken. I spent a <em>long</em>
time with a web browser&rsquo;s &ldquo;Inspect Element&rdquo; tool, comparing how
the tufte-jekyll post was being rendered to how my own draft blog
post was rendered.</p>

<p>Over the course of doing this, I found it necessary to revise my
<code>_fsk_tufte.scss</code> in myriad ways.</p></li>
</ol>


<a name="Revisions.to._fsk_tufte.scss"></a>
<h3>Revisions to _fsk_tufte.scss</h3>

<ol>
<li><p>I removed any content that I hypothesized was not related to my
margin-rendering related goals. For example, <code>tufte.scss</code>
automatically increases the font size as the browser window
width increases. I find this distracting as a programmer (and
annoying as a reader), so I removed it.</p></li>
<li><p>I changed the footnote font-size selection strategy.</p>

<ul>
<li><p>Tufte-jekyll&rsquo;s strategy is to use <code>1.0rem</code><label for='' class='margin-toggle'>&#8853;</label><input type='checkbox' id='' class='margin-toggle'/><span class='marginnote'>
&ldquo;rem&rdquo; stands for &ldquo;root em&rdquo; which in turn means &ldquo;unit equal to the
height of a capital M in the root (i.e. <code>html</code>) element of the document&rdquo;
</span>
as the <code>font-size</code> for the margin text and then scaling up the font-size
for the main content to be <code>1.4rem</code> (so that the main text ends up 1.4x
the size of the margin text).</p></li>
<li><p>I instead used <code>font-size: 0.8rem;</code> for margin text, and leave the
font-size for the main text unchanged (so that in principle it will
remain at <code>1rem</code>).</p></li>
<li><p>My reasoning here is that the majority of the text should be
occurring in the main content area, and we should be respecting
the font settings chosen by the user in their browser for such
text. If the user has selected a font size of 14, then that is
what we should use for the main text; we should not be using 14
for the margin notes and scale the main text up to 1.4*14 (=
19.6).</p></li>
</ul>
</li>
<li><p>After I noticed that my main-and-margin presentation style was
begin applied even to things like the <em>sidebar</em> of the blog,
I added guards to all of the relevant parts of <code>_fsk_tufte.scss</code>
so that the main-and-margin styling <em>only</em> applies to elements
that occur within an <code>article</code> element (since the main content
blocks always fall under an article).</p>

<p>Those were rules like this:</p>

<pre><code>// If a `ul`/`ol` occurs *immediately* (&gt;) under an `article`
article &gt; ul, article &gt; ol {
    width: 60%
}
</code></pre>

<p>I also added customization to try to avoid double-applications of
the percentage-based width restrictions; for example, I added
a rule like:</p>

<pre><code>p, ul, ol { p, ul, ol: width: 100 }
</code></pre>

<p>Update: Then I discovered that:</p>

<ol>
<li><p>this rule was not necessary for the cases where I had originally needed it,</p></li>
<li><p>it is not actually being applied since it is overridden by other rules
 (presumably due to some resolution logic for CSS that I have not digested),
 and,</p></li>
<li><p>if you get it to apply, it has a negative overall effect on
 e.g. nested lists: it causes them to be assigned a width corresponding
 to main <em>plus</em> margin. (Clearly my mental model of what how these percentages
 relate to the parent element is flawed in various ways.)</p></li>
</ol>


<p>So I have since removed that last rule.</p></li>
</ol>


<p>Anyway, those are the main customizations of the SCSS that I can think
of off-hand. You can of course just go peek at <a href="https://github.com/pnkfelix/pnkfx-blog/">its source code</a>
if you want to see what it currently looks like (and perhaps offer
tips on how I might revise it).</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Updating Octopress post-Mavericks upgrade.]]></title>
    <link href="http://blog.pnkfx.org/blog/2014/03/13/meta-updating-octopress-post-mavericks-upgrade/"/>
    <updated>2014-03-13T06:18:00-04:00</updated>
    <id>http://blog.pnkfx.org/blog/2014/03/13/meta-updating-octopress-post-mavericks-upgrade</id>
    <content type="html"><![CDATA[<p>I decided this morning to write a blog post related to Rust.  I have
not posted to this blog in months, and in the meantime I had upgraded
this computer at home to Mac OS X Mavericks (10.9.2).</p>

<p>So of course my existing set of commands for Octopress workflow did
not work.</p>

<!-- more -->


<p>At first there were dependencies like <code>chunky_png-1.2.7</code> that had to
be satisfied (re-installed, I assume; I am pretty sure I blew away my
previous Homebrew setup during the upgrade; I do not know how much
that overlaps with Ruby&rsquo;s package management system).</p>

<p>The few step was just blind following of the suggestions made by my
tools: <code>rake</code> suggests to run <code>bundle install</code>, and I comply.  And the results
seem promising:
<code>text
% rake generate
Could not find chunky_png-1.2.7 in any of the sources
Run \`bundle install\` to install missing gems.
% bundle install
Fetching gem metadata from http://rubygems.org/.......
Fetching gem metadata from http://rubygems.org/..
Using rake (0.9.6)
Using RedCloth (4.2.9)
Installing chunky_png (1.2.7)
Using fast-stemmer (1.0.2)
Using classifier (1.3.3)
Using fssm (0.2.10)
Installing sass (3.2.5)
Using compass (0.12.2)
Using directory_watcher (1.4.1)
Installing haml (3.1.8)
Installing kramdown (0.13.8)
Installing liquid (2.3.0)
Using syntax (1.0.0)
Using maruku (0.6.1)
Using posix-spawn (0.3.6)
Using yajl-ruby (1.1.0)
Installing pygments.rb (0.3.7)
Installing jekyll (0.12.0)
Installing rack (1.4.5)
Installing rack-protection (1.3.2)
Using rb-fsevent (0.9.3)
Using rdiscount (1.6.8)
Using redcarpet (2.2.2)
Using rubypants (0.2.0)
Installing tilt (1.3.3)
Installing sinatra (1.3.4)
Installing stringex (1.4.0)
Using bundler (1.3.5)
Your bundle is complete!
Use \`bundle show [gemname]\` to see where a bundled gem is installed.
</code></p>

<p>But I
balked on the second step:
<code>
% rake generate
rake aborted!
You have already activated rake 10.1.0, but your Gemfile requires rake 0.9.6. Using bundle exec may solve this.
/Users/pnkfelix/Dev/Sites/pnkfx-blog/Rakefile:2:in \`&lt;top (required)&gt;'
(See full trace by running task with --trace)
% bundle exec
bundler: exec needs a command to run
</code></p>

<p>I did not understand what <code>bundle exec</code> meant here, so I did not do the &ldquo;obvious thing&rdquo;, which apparently is to re-run generate but within bundle, like so:
<code>% bundle exec rake generate</code></p>

<p>Instead I fumbled around trying to figure out what my situation was
with respect to <code>rake:</code> do I need to downgrade to a previous version?
Or do I need to upgraade its subcomponents, and/or my whole site
configuration?</p>

<p>The first things I learned from a couple web interactions:</p>

<p>From <a href="http://stackoverflow.com/questions/17474969/you-have-already-activated-rake-0-9-6-but-your-gemfile-requires-rake-10-1-0-us">stackoverflow</a>
I learned:</p>

<ul>
<li>You can find out what version(s) of a gem you have install, with
the relatively obvious <code>gem list</code> command:
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>% gem list rake&lt;/li&gt;
</span><span class='line'>&lt;/ul&gt;
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>&lt;p&gt;&lt;strong&gt;&lt;em&gt; LOCAL GEMS &lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;rake (10.1.0, 0.9.6)</span></code></pre></td></tr></table></div></figure></p>

<ul>
<li>You can also remove particular versions of a gem, with the <code>gem
uninstall</code> command:
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>% gem uninstall rake&lt;/li&gt;
</span><span class='line'>&lt;/ul&gt;
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>&lt;p&gt;Select gem to uninstall:
</span><span class='line'> 1. rake-0.9.6
</span><span class='line'> 2. rake-10.1.0
</span><span class='line'> 3. All versions&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;blockquote&gt;&lt;p&gt;1
</span><span class='line'>Successfully uninstalled rake-0.9.6</span></code></pre></td></tr></table></div></figure></p></blockquote>

<p>But these facts and this process did not actually help, because I
still needed <code>rake-0.9.6</code> for my site configuration, for some reason I
have not yet determined (mostly due to lack of trying).</p>

<p>I then did some more guessing and followed some false paths, like
reinstalling the <code>bundler</code> gem, uninstalling and reinstalling rake
(which effectively led to me replacing rake-10.1.0 with rake-10.1.1).</p>

<p>At some point I ran this:
<code>
% bundle update rake
Fetching gem metadata from http://rubygems.org/........
Fetching gem metadata from http://rubygems.org/..
Resolving dependencies...
Installing rake (0.9.6)
Using RedCloth (4.2.9)
Using chunky_png (1.2.7)
Using fast-stemmer (1.0.2)
Using classifier (1.3.3)
Using fssm (0.2.10)
Using sass (3.2.5)
Using compass (0.12.2)
Using directory_watcher (1.4.1)
Using haml (3.1.8)
Using kramdown (0.13.8)
Using liquid (2.3.0)
Using syntax (1.0.0)
Using maruku (0.6.1)
Using posix-spawn (0.3.6)
Using yajl-ruby (1.1.0)
Using pygments.rb (0.3.7)
Using jekyll (0.12.0)
Using rack (1.4.5)
Using rack-protection (1.3.2)
Using rb-fsevent (0.9.3)
Using rdiscount (1.6.8)
Using redcarpet (2.2.2)
Using rubypants (0.2.0)
Using tilt (1.3.3)
Using sinatra (1.3.4)
Using stringex (1.4.0)
Using bundler (1.3.5)
Your bundle is updated!
</code>
but I still got the error:
<code>
% rake generate
rake aborted!
You have already activated rake 10.1.1, but your Gemfile requires rake 0.9.6. Using bundle exec may solve this.
/Users/pnkfelix/Dev/Sites/pnkfx-blog/Rakefile:2:in \`&lt;top (required)&gt;'
(See full trace by running task with --trace)
</code>
and this is when I finally saw that I had to do:
<code>
% bundle exec rake generate
</code></p>

<p>Except that this did not solve everything:
<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
</pre></td><td class='code'><pre><code class='text'><span class='line'>% bundle exec rake generate&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;a name=&quot;Generating.Site.with.Jekyll&quot;&gt;&lt;/a&gt;
</span><span class='line'>&lt;h2&gt;Generating Site with Jekyll&lt;/h2&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;unchanged sass/screen.scss
</span><span class='line'>Configuration from /Users/pnkfelix/Dev/Sites/pnkfx-blog/_config.yml
</span><span class='line'>Building site: source -&gt; public
</span><span class='line'>YAML Exception reading 2013-04-12-better-command-completion-in-bash-aka-resolving-zsh-envy.markdown: invalid byte sequence in US-ASCII
</span><span class='line'>/Users/pnkfelix/Dev/Sites/pnkfx-blog/plugins/backtick_code_block.rb:13:in `gsub&#39;: invalid byte sequence in US-ASCII (ArgumentError)
</span><span class='line'>    from /Users/pnkfelix/Dev/Sites/pnkfx-blog/plugins/backtick_code_block.rb:13:in `render_code_block\&amp;lsquo;
</span><span class='line'>    from /Users/pnkfelix/Dev/Sites/pnkfx-blog/plugins/octopress_filters.rb:12:in `pre_filter&amp;rsquo;
</span><span class='line'>    from /Users/pnkfelix/Dev/Sites/pnkfx-blog/plugins/octopress_filters.rb:28:in `pre_render&#39;
</span><span class='line'>    from /Users/pnkfelix/Dev/Sites/pnkfx-blog/plugins/post_filters.rb:112:in `block in pre_render&#39;
</span><span class='line'>    from /Users/pnkfelix/Dev/Sites/pnkfx-blog/plugins/post_filters.rb:111:in `each&#39;
</span><span class='line'>    from /Users/pnkfelix/Dev/Sites/pnkfx-blog/plugins/post_filters.rb:111:in `pre_render&#39;
</span><span class='line'>    from /Users/pnkfelix/Dev/Sites/pnkfx-blog/plugins/post_filters.rb:166:in `do_layout&#39;
</span><span class='line'>    from /Users/pnkfelix/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/jekyll-0.12.0/lib/jekyll/post.rb:195:in `render&#39;
</span><span class='line'>    from /Users/pnkfelix/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/jekyll-0.12.0/lib/jekyll/site.rb:200:in `block in render&#39;
</span><span class='line'>    from /Users/pnkfelix/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/jekyll-0.12.0/lib/jekyll/site.rb:199:in `each&#39;
</span><span class='line'>    from /Users/pnkfelix/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/jekyll-0.12.0/lib/jekyll/site.rb:199:in `render&#39;
</span><span class='line'>    from /Users/pnkfelix/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/jekyll-0.12.0/lib/jekyll/site.rb:41:in `process&#39;
</span><span class='line'>    from /Users/pnkfelix/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/jekyll-0.12.0/bin/jekyll:264:in `&lt;top (required)&gt;&amp;lsquo;
</span><span class='line'>    from /Users/pnkfelix/.rbenv/versions/1.9.3-p194/bin/jekyll:23:in `load&amp;rsquo;
</span><span class='line'>    from /Users/pnkfelix/.rbenv/versions/1.9.3-p194/bin/jekyll:23:in `&lt;main&gt;&amp;lsquo;
</span></code></pre></td></tr></table></div></figure></p>

<p>Another web search brought me to a <a href="http://otfusion.org/blog/2013/10/27/os-x-mavericks/">post by a fellow Mavericks user</a> who seems to have a similar attitude to my own about ruby development.
And from that I found the full command I needed
<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='text'><span class='line'>% LANG=en_US.utf-8 bundle exec rake generate&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;a name=&quot;Generating.Site.with.Jekyll&quot;&gt;&lt;/a&gt;
</span><span class='line'>&lt;h2&gt;Generating Site with Jekyll&lt;/h2&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;unchanged sass/screen.scss
</span><span class='line'>Configuration from /Users/pnkfelix/Dev/Sites/pnkfx-blog/_config.yml
</span><span class='line'>Building site: source -&gt; public
</span><span class='line'>Successfully generated site: source -&gt; public
</span></code></pre></td></tr></table></div></figure></p>

<p>And here we are!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Resurrected (Hello Again World)]]></title>
    <link href="http://blog.pnkfx.org/blog/2013/01/08/resurrected-hello-again-world/"/>
    <updated>2013-01-08T00:55:00-05:00</updated>
    <id>http://blog.pnkfx.org/blog/2013/01/08/resurrected-hello-again-world</id>
    <content type="html"><![CDATA[<a name="It.s.Clobbering.Time"></a>
<h2>It&rsquo;s Clobbering Time</h2>

<p>Remember that thing I said back <a href="/blog/2012/12/31/hello-world">at the end of 2012</a>?
That thing?
That thing about the important detail that:</p>

<blockquote><p>the <code>_deploy/</code> subdirectory is itself a clone of the targeted
github repository, with the <code>gh-pages</code> branch checked out.</p></blockquote>

<p>It turns out this is really important detail.</p>

<p>Here&rsquo;s why: For my first blogging act of the new year, I inadvertently destroyed
my own blog.</p>

<!-- more -->


<p>I attempted to write a post from a computer other than the one out of
which I had already worked all the octopress-compatibility kinks.
In the hustle of dealing with <code>rbenv</code> and various other ruby-oriented
dependencies, I forgot about the detail above.</p>

<p>And then when I ran <code>rake deploy</code>, I clobbered the live blog.</p>

<p>I may have been recovering from, or incapacitated by, New Years
revelry at the time, it is not clear to me at the current moment.  I
believe I identified the disaster right after it happened, but immediately
decided I did not have the time then to diagnose it, fix it,
or even to attempt to rollback the
state and repush to github.  I vaguely remember considering that last option
and deciding that even that was out of the question.  (I think a pending
trip to a Karaoke bar may have been involved in the decision-making
process here.)</p>

<p>So, tonight I diagnosed and fixed the problem.</p>

<p>At first I was just going to let the matter lie undocumented, and
pretend like it never happened.</p>

<p>But I realized that I may well again make the same mistake in the future,
and that it behooved me to at least document the issue in my commit
log for <a href="https://github.com/pnkfelix/pnkfx-blog/commits/blog.pnkfx.org">the blog source</a>.</p>

<p>And after writing that commit log entry and pushing it, I decided that
this story was in fact blog worthy; after all, what is the point of
a blog if not to freely broadcast your mistakes?  :)</p>

<p>So, directly from <a href="https://github.com/pnkfelix/pnkfx-blog/commit/f277b041de33a8e0eac02c6aecb3909231725db7">my commit message</a>, here is the description of how
I clobbered my own blog:</p>

<blockquote><p>The easy way to sum it up is: The model
employed by octopress when deploying to github is this: Your <em>deploy/
subdirectory must contain a checkout of the target repo, the one with
the gh-pages branch, and you must have that </em>deploy/ subdirectory
checked out and ready to go before running &lsquo;rake deploy&rsquo;.</p>

<p>If you do not have a _deploy/ subdirectory at all and you let &lsquo;rake
deploy&rsquo; create it for you but you also let &lsquo;rake deploy&rsquo; attempt to
push to github, and you are also managing the source itself on github,
you will enter a world of pain where the rake invocation will push
<em>this</em> root directory, presumably in the master branch (or in my case,
blog.pnkfx.org branch) to the target repo in the gh-pages/ branch.
Which will bust things terribly, especially if that causes the CNAME
file to get deleted from the gh-pages/ branch of the target repo.</p></blockquote>

<a name="A.note.on.self-reference"></a>
<h2>A note on self-reference</h2>

<p>Also, a quick half shout-out, or maybe corrective note, to
<a href="http://www.seamusbradley.net/blog/blog/2012/04/24/how-to-link-to-your-own-blog-posts-in-octopress/">seamusbradley</a> for pointing out some details about linking back to
one&rsquo;s own blog posts.</p>

<p>It is only a half shout-out because Seamus&rsquo;s note is only useful, I
think, if you have, like him, a customized setting for the <code>root:</code> in
your <code>_config.yml</code>.  That, or Seamus has confused himself and changed
his <code>root</code> setting in order to accommodate other url&rsquo;s that he
observed, but those urls are in fact actually generated by settings
for properties other than <code>root</code>.</p>

<p>Here&rsquo;s the concrete details: I read (misread?) Seamus&rsquo;s post at first
as saying that a customized setting of <code>root</code> to <code>/blog</code> is a
prerequisite for linking to your own posts.  It seems to me that the
relevant detail is what the <em>permalink</em> setting is, not the root.
(But then again, I have not played with changing my root setting,
apart from finding that when I did try changing it to <code>/blog</code> as
Seamus suggested, it seems like doing so broke <code>rake preview</code>.)</p>

<p>In my case, the <code>root</code> and <code>permalink</code> for my <code>_config.yml</code>
are set as follows:</p>

<pre><code>root: /
permalink: /blog/:year/:month/:day/:title/
</code></pre>

<p>and I format links to my own posts, such as the one you are reading,
like so:
<a href="/blog/2013/01/08/resurrected-hello-again-world"><code>/blog/2013/01/08/resurrected-hello-again-world</code></a>
as you can see from looking at the source for the line above,</p>

<pre><code>[`/blog/2013/01/08/resurrected-hello-again-world`](/blog/2013/01/08/resurrected-hello-again-world)
</code></pre>

<p>A bit of quoted self-reference is a good place to stop for the night.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Hello World]]></title>
    <link href="http://blog.pnkfx.org/blog/2012/12/31/hello-world/"/>
    <updated>2012-12-31T14:34:00-05:00</updated>
    <id>http://blog.pnkfx.org/blog/2012/12/31/hello-world</id>
    <content type="html"><![CDATA[<!---
Apparently Markdown syntax does not have any shorthand for comments
-->




<!---
First 7 lines of this file were generated by command invocation:
  % rake new_post["Hello World"]
-->


<p>First post!
I am attempting to move my blog to GitHub Pages.</p>

<p>After seeing the results of others, I figure I will start with Octopress
and see how that goes.</p>

<!-- more -->


<p>Just so I can remind myself of the Octopress basics in the immediate future:</p>

<ul>
<li><p>Much of the page generation is controlled by configuration file <code>_config.yml</code></p></li>
<li><p>The content is all stored in <code>source/_posts/</code></p></li>
<li><p>This particular entry corresponds to the file <code>2012-12-31-hello-world.markdown</code></p></li>
<li><p>The first 7 lines of that file were originally generated via the
<code>rake</code> command invocation:</p>

<pre><code>% rake new_post["Hello World"]
</code></pre></li>
<li><p>The command <code>rake generate</code> will convert the source into static html pages.</p></li>
<li><p>After generating the file (and during subsequent editting), one can preview
the state locally in a local Ruby webserver via:</p>

<pre><code>% rake preview
</code></pre>

<p>and then <a href="http://localhost:4000/">browsing localhost port 4000</a>.
The <code>rake preview</code> invocation will continuously monitor your post
source files so that you can keep working on your post and then
reload in your web browser without rerunning <code>rake</code> itself.</p></li>
<li><p>The command <code>rake deploy</code> is supposed to deploy the content into its intended
live location.  I have been having difficulty using this command,
in part because I think it is written assuming you have your ssh-key
already set up and integrated with github (or something similar) so that
there would be no password prompts.</p>

<ul>
<li><p>But of course I have not done this yet.</p></li>
<li><p>One important detail about <code>rake deploy</code> with github pages is that
the <code>_deploy/</code> subdirectory is itself a clone of the targetted
github repository, with the <code>gh-pages</code> branch checked out.
This can be confusing if your main source tree (the parent
directory of <code>_deploy/</code>) is itself the same repository as the
targetted github repository.</p></li>
</ul>
</li>
<li><p>Update: <code>rake deploy</code> just worked fine for me, password prompts and all.
I think my earlier difficulty was an artifact of some previous bad
state, one of either:</p>

<ul>
<li><p>I had put in a malformatted url for the target repository</p></li>
<li><p>My target repository already had a <code>gh-pages</code> branch (from earlier
testing) that needed to be pulled-and-merged (or discarded in some
fashion, which was what my merge amounted to).</p></li>
</ul>
</li>
<li><p>Update (26 march 2012): there are still some hiccups with <code>rake deploy</code>;
you need to be careful about what you store in the <code>source/</code> directory.
In particular, I was working on a draft post and threw various
source files that I was hacking on in the same directory, along with
some <code>.gitignore</code> files so that <code>git</code> would ignore build products
generated when I compiled the source (to binaries or jars or fasls&hellip;).</p>

<p>The headache came when I did <code>rake deploy</code>, and hit this error:</p>

<pre><code class="bash">% rake deploy
cp -r source/_posts/.gitignore public/_posts/.gitignore
rake aborted!
No such file or directory - public/_posts/.gitignore
/Users/pnkfelix/Dev/Sites/pnkfx-blog/Rakefile:230:in `block (2 levels) in &lt;top (required)&gt;'
/Users/pnkfelix/Dev/Sites/pnkfx-blog/Rakefile:229:in `block in &lt;top (required)&gt;'
/Users/pnkfelix/Dev/Sites/pnkfx-blog/Rakefile:219:in `block in &lt;top (required)&gt;'
Tasks: TOP =&gt; copydot
(See full trace by running task with --trace)
%
</code></pre>

<p>The problem here, as far as I can tell, is that octopress
is aggressively trying to copy over all dotfiles it can find
(<a href="https://github.com/imathis/octopress/issues/104">Octopress Issue 104</a>)
and that code was not written to create any subdirectories as
necessary.</p>

<p>My Ruby development knowledge is sufficiently under-developed that I
am not going to try to fix this myself.  Instead I have simply
moved all of the source code I was hacking <em>out</em> of the <code>source/</code>
directory and into a separate <code>hacks/</code> directory.
This seems to have addressed the problem; I have also filed
<a href="https://github.com/imathis/octopress/issues/1151">an issue</a>
for this with Octopress.</p></li>
</ul>

]]></content>
  </entry>
  
</feed>
